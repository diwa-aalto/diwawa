<!DOCTYPE html>       
<html lang="en">  
<head>  
    <meta charset="utf-8">  
    <meta name="description" content="">
    <title>Diwaamo</title>  
    <link rel="stylesheet" href="/static/css/960/reset.css" />
	<link rel="stylesheet" href="/static/css/960/text.css" />
	<link rel="stylesheet" href="/static/css/960/960.css" />
	<link rel="stylesheet" href="/static/css/main.css" type="text/css" />
	<link rel="stylesheet" href="/static/css/jchat.css" type="text/css" />
	<link type="text/css" href="/static/css/dot-luv/jquery-ui-1.8.23.custom.css" rel="stylesheet" />
	<!--[if IE]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--[if lte IE 7]>
		<script src="js/IE8.js" type="text/javascript"></script><![endif]-->
	<!--[if lt IE 7]>
		<link rel="stylesheet" type="text/css" media="all" href="css/ie6.css"/><![endif]-->
	<script src="/static/js/jquery.js" type="text/javascript"></script>
	<script src="/static/js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>
	<script src="/static/js/jquery.filedownload.js" type="text/javascript"></script>
	<script src="/static/js/jquery.bxSlider.min.js" type="text/javascript"></script>
	<script src="/static/js/jquery.emailSpamProtection.1.0.js" type="text/javascript"></script>
	<script src="/static/js/jqueryFileTree.js" type="text/javascript"></script>
	<script src="/static/js/jchat.js" type="text/javascript"></script>
	<script src="/static/js/jquery.cookie.js" type="text/javascript"></script>
	<script src="/static/js/jquery.equalHeights.js" type="text/javascript"></script>
	<script src="/static/js/jquery.dropdown.js" type="text/javascript"></script>
	<script type="text/javascript">
$(document).ready(function(){
	$(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
	});
	
	{% if activity.project %}
 	
    $('#chat_error').hide();
    if($.cookie('dchat_name') != null){
    $('#fchat').hide();	
    init_chat({{chat_id}}, "chat");
    $("#chat-messages-container").resizable({containment: "parent"});
    }
    {% else %}
    $('#fchat').hide();
    {% endif %}
    $("#fchat").submit(function() {  
    var name =  $("input#name").val();
    $.cookie('dchat_name',name);
    init_chat({{chat_id}}, "chat");
    $("#chat-messages-container").resizable({containment: "parent"});
    $('#fchat').fadeOut(300,function(){$('#chat').fadeIn(300);});
  
    
    return false;
  });

 

 });
 

   

</script>	
</head>  
<body>
     <div class="page">
    	<div class="page-header"><div class="page-header-content">DiWa Chat</div></div>
       <div class="page-region">
    		<div class="page-region-content">
                     <div class="grid">
    				<div class="row">
    					
<div id="chat_error" class="error alert-message">
		<p class='notice'> Chat not available!</p>
</div>
<form id="fchat">
	<input id="name" name="name" required type="text" onblur="if (this.value == '') {this.value = 'Enter name here!';}" onfocus="if (this.value == 'Enter name here!') {this.value = '';}" value="Enter name here!">
	<input type="submit" name="submit"  id="chat_submit" value="Go!" /> 
</form>
<div id="chat"></div>

				</div>
    			</div>
    		</div>
    	</div>
     </div>
 <!-- 	<div id="wrapper">   
    
  <section class="container_12">  
        <!-- Main content area -->
<!--         <h1>DiWa Chat</h1>
            <section class="rounded_box">



<div class="grid_12 alpha omega clearfix"><div class="orange_box"><div id="chat_container"><h3>Chat</h3>
<div id="chat_error" class="error alert-message">
		<p class='notice'> Chat not available!</p>
</div>
<form id="fchat">
	<input id="name" name="name" required type="text" onblur="if (this.value == '') {this.value = 'Enter name here!';}" onfocus="if (this.value == 'Enter name here!') {this.value = '';}" value="Enter name here!">
	<input type="submit" name="submit"  id="chat_submit" value="Go!" /> 
</form>
<div id="chat"></div>
</div></div></div>

<div class="clear"></div>
</section>  
    </section> 

    </div>   -->   
</body>  
</html> 
